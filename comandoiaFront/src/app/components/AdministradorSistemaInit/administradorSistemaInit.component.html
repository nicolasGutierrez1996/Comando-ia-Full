<div class="aplicacion">
  <div class="menu-lateral">
    <h2>IA Malvinas</h2>
    <ul class="lista-opciones">
      <li>
        <button type="button"
                (click)="MostrarSubBotonesReclamo()"
                class="menu-titulo"
                [class.activo]="mostrarSubBotonReclamos">
          <span class="texto">Administrar reclamos</span>
          <span class="flecha" [class.rotada]="mostrarSubBotonReclamos">▶</span>
        </button>
        <div class="subbotones">
          <button class="subboton" *ngIf="mostrarSubBotonReclamos">Administrar valores</button>
          <button class="subboton" *ngIf="mostrarSubBotonReclamos">Editar valores</button>
        </div>
      </li>
      <li>
        <button type="button" (click)="MostrarSubBotonesObras()" class="menu-titulo"
                [class.activo]="mostrarSubBotonObras">
          <span class="texto">Administrar obras</span>
          <span class="flecha" [class.rotada]="mostrarSubBotonObras">▶</span>
        </button>
        <div class="subbotones">
          <button class="subboton" *ngIf="mostrarSubBotonObras">Administrar valores</button>
          <button class="subboton" *ngIf="mostrarSubBotonObras">Editar valores</button>
        </div>
      </li>
      <li>
        <button type="button" (click)="MostrarSubBotonesUsuarios()" class="menu-titulo"
                [class.activo]="mostrarSubBotonUsuario">
          <span class="texto">Administrar usuarios</span>
          <span class="flecha" [class.rotada]="mostrarSubBotonUsuario">▶</span>
        </button>
        <div class="subbotones">
          <button class="subboton" *ngIf="mostrarSubBotonUsuario" (click)="MostrarCargarUsuarios()">Crear usuario</button>
          <button class="subboton" *ngIf="mostrarSubBotonUsuario" (click)="MostrarModoEdicion()">Editar usuario</button>
        </div>
      </li>
    </ul>
  </div>

  <!-- CONTENIDO PRINCIPAL USUARIOS-->
  <div class="contenido-principal">
    <h2 style="color: white; margin-bottom: 20px;">USUARIOS</h2>

    <div id="formulario-crear-usuario" *ngIf="mostrarCargaDeUsuario ||  modoEdicion">
      <form class="formulario">

        <div style="position: relative;">
        <label>Nombre de usuario:
          <input type="text" name="nombre" [(ngModel)]="nombre_usuario" (input)="buscarUsuarios(nombre_usuario)" required>        </label>

        <ul *ngIf="modoEdicion && usuariosSugeridos && usuariosSugeridos.length > 0" class="autocomplete-list">
          <li *ngFor="let usuario of usuariosSugeridos" (mousedown)="seleccionarUsuario(usuario)">
            {{ usuario.nombre }}
          </li>
        </ul>
        <div *ngIf="error_nombre" class="mensaje-error">
          {{ error_nombre }}
        </div>
        </div>
        <ng-container *ngIf="!modoEdicion || mostrarDatosEdicion">
        <label>Email:
          <input type="email" name="email" [(ngModel)]="email" required>
        </label>
        <div *ngIf="error_mail" class="mensaje-error">
          {{ error_mail }}
        </div>
        <label>Estado:
          <select name="estado" [(ngModel)]="estadoSeleccionadoId" required>
            <option *ngFor="let estado of estados" [value]="estado.id">
              {{ estado.descripcion }}
            </option>
          </select>
        </label>
        <div *ngIf="error_estado" class="mensaje-error">
          {{ error_estado }}
        </div>

        <label>Rol:
          <select name="rol" [(ngModel)]="rolSeleccionadoId" required>
            <option *ngFor="let rol of roles" [value]="rol.id">
              {{ rol.tipo }}
            </option>
          </select>
        </label>
        <div *ngIf="error_rol" class="mensaje-error">
          {{ error_rol }}
        </div>
        </ng-container>
        <button (click)="crearUsuario() " *ngIf="!modoEdicion">Crear usuario</button>
        <button (click)="editarUsuario()" *ngIf="modoEdicion">Editar usuario</button>
        <div *ngIf="error" class="mensaje-error">
          {{ error }}
        </div>
      </form>
    </div>
  </div>
</div>

<div class="aplicacion">
  <div class="menu-lateral">
    <h2>IA Malvinas</h2>
    <ul class="lista-opciones">
      <li>
        <button type="button" class="menu-titulo" (click)="mostrarInicioBoton()">
          <span class="texto">Inicio</span>
        </button>

        <button type="button" class="menu-titulo">
          <span class="texto">Consultar Reclamos</span>
          <span class="flecha">‚ñ∂</span>
        </button>
        <div class="subbotones">
          <button class="subboton" (click)="mostrarGraficosReclamosBoton()">Visualizar Gr√°ficos</button>
          <button class="subboton" (click)="mostrarMapaReclamosBoton()">Visualizar Mapas</button>
        </div>
      </li>
      <li>
        <button type="button" class="menu-titulo">
          <span class="texto">Consultar Obras</span>
          <span class="flecha">‚ñ∂</span>
        </button>
        <div class="subbotones">
          <button class="subboton">Visualizar Gr√°ficos</button>
          <button class="subboton">Visualizar Mapas</button>
        </div>
      </li>
    </ul>

    <button class="btn-ia-malvinas">
      <span>üí¨ HABLAR CON IA MALVINAS</span>
    </button>
    <button class="boton-volver">Volver hacia atr√°s</button>
  </div>

  <div class="contenido-principal">
    <div class="titulo">
      <!--<h2>Mapa de Reclamos</h2>-->
    </div>

    <!-- SECCI√ìN INICIO -->
    <div class="Inicio" *ngIf="mostrarInicio">
      <h1>INICIO</h1>
      <div class="container">
        <div class="title">COMANDO IA MALVINAS</div>
        <div class="subtitle">Grand Bourg - Malvinas Argentinas</div>

        <div class="cards">
          <div class="card">
            <div class="percentage">67%</div>
            <div class="label">Imagen Positiva<br>del intendente</div>
            <div class="change positive">‚Üë +1%</div>
            <div class="ver-btn">Ver</div>
          </div>

          <div class="card">
            <div class="percentage">55%</div>
            <div class="label">Intenci√≥n de Voto</div>
            <div class="change positive">‚Üë 4%</div>
            <div class="ver-btn">Ver</div>
          </div>

          <div class="card">
            <div class="percentage">32</div>
            <div class="label">Obras p√∫blicas<br>en ejecuci√≥n</div>
            <div class="change positive">‚Üë 3%</div>
            <div class="ver-btn">Ver</div>
          </div>

          <div class="card">
            <div class="percentage">3.425</div>
            <div class="label">Reclamos Vecinales</div>
            <div class="change negative">‚Üì -2%</div>
            <div class="ver-btn">Ver</div>
          </div>
        </div>
      </div>
      <div class="contenedor-principal">
        <div class="tarjeta alerta">
          <h3>üî¥ ALERTA CR√çTICA</h3>
          <p><strong>Incremento Delictivo en Villa de Mayo</strong></p>
          <p>+29% de robos reportados en los √∫ltimos 15 d√≠as, con epicentro en el eje Gervasio M√©ndez - Mitre</p>
          <p><strong>‚ö† Acci√≥n:</strong> activar Comit√© de Crisis con Seguridad, sumar rondines con m√≥viles y presencia institucional</p>
        </div>

        <div class="tarjeta recomendacion">
          <h3>üü° RECOMENDACI√ìN</h3>
          <p><strong>Refuerzo Comunicacional de Obras en Ejecuci√≥n</strong></p>
          <p>Muchas obras con alta inversi√≥n no est√°n siendo visibilizadas.</p>
          <p><strong>‚úî Recomendaci√≥n:</strong> Implementar se√±al√©tica territorial + posteos sectoriales con testimonio vecino</p>
        </div>

        <div class="tarjeta sugerencia">
          <h3>üîµ SUGERENCIA</h3>
          <p><strong>Segmentar la narrativa pol√≠tica por grupo etario</strong></p>
          <p>No todos los p√∫blicos responden igual al mensaje de gesti√≥n.</p>
          <p><strong>üí° Sugerencia:</strong> J√≥venes: futuro y empleo. Adultos: seguridad y limpieza. Mayores: cercan√≠a y salud</p>
        </div>
      </div>

      <div class="chat-container">
        <input type="checkbox" id="chat-toggle">
        <label for="chat-toggle" class="chat-button">üí¨</label>

        <div class="chat-box">
          <div class="chat-header">IA CHAT</div>
          <div class="chat-body">
            <p>Hola, ¬øen qu√© puedo ayudarte?<br>Pregunta lo que quieras‚Ä¶</p>
            <input type="text" placeholder="Escribe un mensaje‚Ä¶">
          </div>
        </div>
      </div>
    </div>



    <!-- SECCI√ìN GR√ÅFICOS -->
    <div *ngIf="mostrarGraficosReclamos || mostrarMapaReclamos" class="graficos-reclamos">
      <div class="filtros-container">
        <div class="filtro-item">
          <label>Fecha desde:</label>
          <input type="date" [(ngModel)]="fechaDesdeReclamo" />
        </div>

        <div class="filtro-item">
          <label>Fecha hasta:</label>
          <input type="date" [(ngModel)]="fechaHastaReclamo" />
        </div>

        <div class="filtro-item">
          <label>Estado:</label>
          <select [(ngModel)]="estadoReclamoSeleccionado">
            <option value=""></option>
            <option *ngFor="let estado of estadosReclamoDisponibles" [value]="estado">{{ estado }}</option>
          </select>
        </div>

        <div class="filtro-item">
          <label>Localidad:</label>
          <select [(ngModel)]="localidadSeleccionada">
            <option value=""></option>
            <option *ngFor="let loc of localidadesDisponibles" [value]="loc">{{ loc }}</option>
          </select>
        </div>

        <div class="filtro-item">
          <label>Barrio:</label>
          <select [(ngModel)]="barrioSeleccionado">
            <option value=""></option>
            <option *ngFor="let barrio of barriosDisponibles" [value]="barrio">{{ barrio }}</option>
          </select>
        </div>

        <div class="filtro-item">
          <label>Tipo de reclamo:</label>
          <select [(ngModel)]="tipoReclamoSeleccionado">
            <option value=""></option>
            <option *ngFor="let tipo of tiposReclamoDisponibles" [value]="tipo">{{ tipo }}</option>
          </select>
        </div>

        <div class="filtro-item">
          <label>Nivel de Satisfacci√≥n:</label>
          <select [(ngModel)]="nivelReclamoSeleccionado">
            <option value=""></option>
            <option *ngFor="let nivel of nivelesReclamoDisponibles" [value]="nivel">{{ nivel }}</option>
          </select>
        </div>

        <div class="filtro-item">
          <label>Tiempo de resoluci√≥n mayor a (d√≠as):</label>
          <input type="number" min="0" [(ngModel)]="tiempResoMayor" />
        </div>

        <div class="filtro-item">
          <label>Tiempo de resoluci√≥n menor a (d√≠as):</label>
          <input type="number" min="0" [(ngModel)]="tiempResoMenor" />
        </div>

        <div class="filtro-item" *ngIf="mostrarGraficosReclamos">
          <label>Agrupar por:</label>
          <select [(ngModel)]="grupoPor" (change)="actualizarAgrupamiento()">
            <option value="estado">Estado</option>
            <option value="localidad">Localidad</option>
            <option value="barrio">Barrio</option>
            <option value="tipo">Tipo de Reclamo</option>
            <option value="satisfaccion">Nivel de Satisfacci√≥n</option>
            <option value="mes">Mes</option>
            <option value="rangoResolucion">Tiempo de Resoluci√≥n</option>
          </select>
        </div>

        <div class="filtro-item" *ngIf="mostrarMapaReclamos">
          <label>Mapa de calor por:</label>
          <select [(ngModel)]="grupoPorCalor" (change)="actualizarAgrupamientoMapa()">
            <option value="estado">Estado</option>
            <option value="satisfaccion">Nivel de Satisfacci√≥n</option>
          </select>
        </div>

        <div class="filtro-item">
          <button (click)="aplicarFiltros()">Aplicar filtros</button>
        </div>



      </div>
    </div>

    <div class="tipo-grafico" *ngIf="tipoGrafico">
      <label>Tipo de gr√°fico:</label>
      <select [(ngModel)]="tipoGraficoSeleccionado" (change)="actualizarGrafico()">
        <option value="bar">Barras</option>
        <option value="pie">Torta</option>
        <option value="line">L√≠neas</option>
        <option value="doughnut">Dona</option>
        <option value="radar">Radar</option>
        <option value="polarArea">√Årea polar</option>
      </select>
    </div>

    <div class="grafico-container" [ngClass]="getChartSizeClass()" *ngIf="mostrarGraficosReclamos">
      <canvas baseChart
              [data]="chartData"
              [options]="chartOptions"
              [type]="chartType">
      </canvas>
    </div>

    <!-- SECCI√ìN MAPA -->
    <div *ngIf="mostrarMapaReclamos" class="mapa-reclamos">

      <div class="mapa" id="map"></div>
    </div>
</div>
</div>
